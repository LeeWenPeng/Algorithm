# 2的幂

题目：[231. 2 的幂 - 力扣（LeetCode）](https://leetcode.cn/problems/power-of-two/)

## 解题思路

**如果 res 是小于等于 0 的数，则 res 一定不是2的幂** // 需要注意！！

判断是否是2的幂次数，所有位上是否只有一个1，其余全是0

找到最右侧的1，判断和这个数是否相同

**问题难点**：找到最右侧的1

**解决方法**:

1.   只保留最右侧的1：
     +   `res & (~res+1)`
     
         >   假设`res`最右侧1的位置是`i`
         >
         >   1.   res取反之后，所有位上的数值都会变成相反的，也就是说，此时：
         >        1.   `i`左侧：`(i,31]`位置上所有数变成与`res`相反的数
         >        2.   `i`：变成0
         >        3.   `i右侧`：`[0,i)`位置上所有的0都会变成1
         >   2.   `~res+1`，右侧变成1的数会都变成0，一直到`res`右侧第一个1的位置，也就是：
         >        +   `i`左侧：与`res`所有数位相反
         >        +   `i`：值为1
         >        +   `i`右侧：全是0
         >   3.   所以，`res & (~res + 1)`的结果是，只剩下`i`位置上为1，其余位置都是0
     
     +   `res & -res`
     
2.   消除最右侧的1：
     +   `res - 1`
     
         >   假设`res`最右侧1的位置为i
         >
         >   `res - 1`后，由`i`将`res`分为三部分
         >
         >   1.   `i`左边：`(i, 32]`，保持不变
         >   2.   `i`：变成0
         >   3.   `i`右边：`[0, i)`，变为1
         >
         >   也就是
         >
         >   1.   `i`左边：`(i, 32]`，保持不变
         >   2.   `i`右边，`[0, i]`，与`res`相反
         >
         >   根据这个题的题意，要求只能`i`的位置上有1，其余全部都应该是0
         >
         >   所以，`res&(res-1)`的结果为，保留`res`中`i`左边`(i,31]`的值，而清零`i`右边`[0,i]`的值
         >
         >   +   `res&(res-1) == 0`：说明只有一个1
         >   +   `res&(res-1) != 0`：说明不只一个1

代码：

```c++
class Solution {
public:
    bool isPowerOfFour(int n) {
        //大于0 n>0
        //2的倍数 !(n^(n&(~n+1)))
        return n>0 && !(n^(n&(~n+1)));
    }
};
```

```c++
class Solution {
public:
    bool isPowerOfFour(int n) {
        return n> 0 && !(n & (n-1)) ;
    }
};
```



