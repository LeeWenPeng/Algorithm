# 4的幂

题目：[342. 4的幂 - 力扣（LeetCode）](https://leetcode.cn/problems/power-of-four/)

## 解题思路：

1.   这个数需要大于0
2.   这个数需要是2的幂，也就是说，需要二进制表示时，只有一位1，其余全是0
3.   需要这一位1在偶数位上

## 难点：

1.   如何确认只有一位1

     `res & (~res + 1)`

2.   如何确认1在偶数位上

     1.   右移次数为偶数 （需要循环）

     2.   构造一个数`mask`，`mask`标记了所有的偶(奇)数位，将`n`与`mask`进行与运算

     3.   mod3（尚且不是很理解是怎么想出来的）

          余1，则为4的倍数

          余2，则为2的倍数

## mod3法证明——数学归纳法

### 1 证明$4^n \% 3 = 1$

假设
$$
2^{2n} \% 3 = 1
$$

则：n=0时
$$
2^0 \% 3 = 1
$$
n=1时
$$
2^2 \% 3 = 1
$$
n = n时
$$
2^{2n} \% 3 = 1
$$
证明n = n+1时
$$
\begin{split}
2^{2n+2} \% 3 &= 2^{2n}*4 \% 3 \\
\ &=(3n' + 1)*4 \% 3 \\
\ &=4\%3\\
\ &=1\\
\end{split}
$$

### 2 证明$2^{2n+1}%3 = 2$

假设
$$
2^{2n+1} \% 3 = 2
$$
则，n=0时
$$
2 \% 3 = 2 
$$
n = 1时，
$$
2^3 \% 3 = 2 
$$

$$
...
$$

n=n时
$$
2^{2n+1} \% 3 = 2
$$
证明 n = n + 1时
$$
\begin{split}
2^{2n+3} \% 3 &= 2^{2n+2}*2 \% 3 \\
\ &=(3n' + 1)*2 \% 3 \\
\ &= 2 \% 3 \\
\ &=2 \\
\end{split}
$$

## 代码

1.标记数位的方法：

```c++
class Solution {
public:
    bool isPowerOfFour(int n) {
        //大于0 n>0
        //2的倍数 !(n^(n&(~n+1)))
        //4的倍数 偶数位1 (n & 0xaaaaaaaa)
        return n>0 && !(n^(n&(~n+1)))&& (n & 0x55555555) ;
    }
};
```

2.mod3的方法

```c++
class Solution {
public:
    bool isPowerOfFour(int n) {
        //大于0 n>0
        //2的倍数 !(n^(n&(~n+1)))
        //4的倍数 模3等于1 (n % 3 == 1)
        return n>0 && !(n & (n-1))&& (n % 3 == 1) ;
    }
};
```

